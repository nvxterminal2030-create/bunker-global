<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NVVEX | GLOBAL MONITOR V6</title>
    <meta property="og:title" content="NVVEX STUDIOS | USA MONITOR V6">
    <meta property="og:description" content="Rastreando la señal global desde el búnker de USA. Inteligencia musical en tiempo real.">
    <meta property="og:image" content="https://nvvexstudios.com/img/NVVEX%20LOGO%20LETRERO-01%20(1).png">
    <meta property="og:url" content="https://newusa.nvvexstudios.com">
    <meta property="og:type" content="website">

    <link rel="apple-touch-icon" href="https://nvvexstudios.com/img/NVVEX%20LOGO%20LETRERO-01%20(1).png">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --dark: #050505; --grid: rgba(0, 242, 255, 0.1); }
        
        body { 
            background: var(--dark); 
            background-image: linear-gradient(var(--grid) 1px, transparent 1px), linear-gradient(90deg, var(--grid) 1px, transparent 1px);
            background-size: 30px 30px;
            color: var(--neon); font-family: 'Share Tech Mono', monospace; margin: 0; display: flex; flex-direction: column; align-items: center;
            overflow-x: hidden;
        }

        /* FONDO ESTELAR */
        .stars-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .star { position: absolute; background: white; border-radius: 50%; opacity: 0.5; animation: travel 15s linear infinite; }
        @keyframes travel { from { transform: translateY(100vh); opacity: 0; } 10% { opacity: 1; } to { transform: translateY(-10vh); opacity: 0; } }

        /* RADAR CENTRAL */
        .main-radar { width: 100px; height: 100px; border: 2px solid var(--neon); border-radius: 50%; margin: 20px 0; position: relative; box-shadow: 0 0 15px var(--neon); }
        .main-radar::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: conic-gradient(from 0deg, transparent 70%, var(--neon)); border-radius: 50%; animation: scan 3s linear infinite; opacity: 0.4; }
        @keyframes scan { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .nav-bunker { display: flex; gap: 10px; width: 95%; max-width: 850px; margin-bottom: 15px; }
        .btn-nav { flex: 1; padding: 8px; border: 1px solid var(--neon); color: var(--neon); text-decoration: none; text-align: center; font-size: 0.7rem; text-transform: uppercase; background: rgba(0,242,255,0.05); }
        .active { background: var(--neon); color: #000; box-shadow: 0 0 10px var(--neon); }

        .monitor { width: 95%; max-width: 850px; padding: 20px; border: 1px solid var(--neon); background: rgba(0,0,0,0.9); box-shadow: 0 0 30px rgba(0,242,255,0.1); margin-bottom: 50px; z-index: 10; }

        /* TENDENCIAS */
        .trend-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; border-bottom: 1px solid var(--neon); padding-bottom: 25px; }
        .trend-card { border: 1px solid var(--neon); padding: 12px; position: relative; background: rgba(0,242,255,0.02); cursor: pointer; }
        .mini-radar { float: right; width: 30px; height: 30px; border: 1px solid var(--neon); border-radius: 50%; position: relative; opacity: 0.6; }
        .mini-radar::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: conic-gradient(from 0deg, transparent 80%, var(--neon)); border-radius: 50%; animation: scan 2s linear infinite; }
        .node-tag { font-size: 0.6rem; background: var(--neon); color: #000; padding: 2px 5px; display: inline-block; margin-bottom: 8px; font-weight: bold; }

        /* NOTICIAS */
        .news-item { border-left: 3px solid var(--neon); padding: 10px 15px; margin-bottom: 15px; background: rgba(0,242,255,0.03); cursor: pointer; }
        .btn-news { display: inline-block; padding: 5px 10px; border: 1px solid var(--neon); color: var(--neon); text-decoration: none; font-size: 0.6rem; margin-top: 8px; transition: 0.3s; }
        .btn-news:hover { background: var(--neon); color: #000; }

        /* MODAL FRONTAL (EL DESPLIEGUE) */
        #modal-inteligencia { 
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            width: 90%; max-width: 550px; background: #000; border: 2px solid var(--neon); 
            padding: 30px; z-index: 10000; box-shadow: 0 0 120px rgba(0,242,255,0.4); color: var(--neon); 
        }
        .modal-overlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.92); z-index: 9999; backdrop-filter: blur(8px); 
        }
    </style>
</head>
<body>
    <div class="stars-container" id="starfield"></div>
    <div class="modal-overlay" id="modal-overlay" onclick="cerrarReporte()"></div>
    <div id="modal-inteligencia"></div>

    <div class="main-radar">
    <img src="img/NVVEX LOGO LETRERO-01 (1).png" 
         style="width: 75px; height: auto; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 5; filter: drop-shadow(0 0 8px #00f2ff);">
</div>
    <div class="nav-bunker">
        <a href="https://nvvexstudios.com" class="btn-nav">LATAM RADAR [F1]</a>
        <a href="#" class="btn-nav active">GLOBAL RADAR [V6-USA]</a>
    </div>

    <div class="monitor">
        <h2 style="text-align:center; letter-spacing: 8px; margin-top:0;">NVVEX GLOBAL</h2>
        <div class="trend-grid" id="trend-output"></div>
        <div id="output">RASTREANDO SEÑAL...</div>
        <button onclick="verMas()" style="width:100%; background:transparent; border:1px solid var(--neon); color:var(--neon); padding:10px; cursor:pointer; font-family:inherit; margin-top:15px;">[ CARGAR MÁS DATOS ]</button>
    </div>

    <script>
        let allLines = []; let visibleCount = 15;

        // MOTOR DE ESTRELLAS
        const field = document.getElementById('starfield');
        for (let i = 0; i < 50; i++) {
            let star = document.createElement('div');
            star.className = 'star';
            let size = Math.random() * 2.5 + 'px';
            star.style.width = size; star.style.height = size;
            star.style.left = Math.random() * 100 + 'vw';
            star.style.animationDuration = (Math.random() * 12 + 8) + 's';
            field.appendChild(star);
        }

        async function load() {
            try {
                // CARGA TENDENCIAS
                const rT = await fetch('tendencia.txt'); const tT = await rT.text();
                const trendOut = document.getElementById('trend-output');
                if(tT.trim()) {
                    trendOut.innerHTML = '';
                    tT.trim().split('\n').slice(0,10).forEach(l => {
                        const parts = l.split('|').map(s => s.trim());
                        if(parts.length >= 5) {
                            const [pos, song, art, node, link] = parts;
                            trendOut.innerHTML += `
                                <div class="trend-card" onclick="window.location.href='${link}'">
                                    <div class="mini-radar"></div>
                                    <div class="node-tag">NODE: ${node}</div>
                                    <div style="color:var(--neon); font-size:0.6rem;">RANK: ${pos}</div>
                                    <div style="font-weight:bold; color:#fff; font-size:0.9rem; margin:3px 0;">${song}</div>
                                    <div style="color:var(--neon); opacity:0.8; font-size:0.75rem;">${art}</div>
                                </div>`;
                        }
                    });
                }
               // 1. CARGA NOTICIAS USA (Fusión: Google + Archivo Local)
        // 1. MOTOR DE INTELIGENCIA USA (Prioridad: Google Doc)
        const [rG, rA] = await Promise.all([
            fetch('https://docs.google.com/document/d/1MrR7GjQJeLffvJE5jP-SYzufR9R37z7tKNtqa2IwWY0/export?format=txt&t=' + new Date().getTime()).then(r => r.text()).catch(() => ""),
            fetch('archivo.txt').then(r => r.text()).catch(() => "")
        ]);

        // Unimos las noticias dándole prioridad al Google Doc arriba
        const todoElContenido = rG.trim() + "\n" + rA.trim();
        allLines = [...todoElContenido.split('\n').filter(l => l.includes('|'))].reverse();
        
        render(); // Lanza la señal al monitor de USA
                // SENSOR TOTAL: Escanea Doc y Archivo al mismo tiempo
        const urlParams = new URLSearchParams(window.location.search);
        const newsId = urlParams.get('id');
        if (newsId) {
            // Buscamos en la lista completa donde ya se mezcló el Doc
            const noticia = allLines.find(l => l.split('|')[0].trim() == newsId);
            if (noticia) {
                const p = noticia.split('|').map(s => s.trim());
                abrirReporte(p[0], p[1], p[2], p[3]);
            }
        }
    } catch(e) { 
        console.log("Buscando señal..."); 
    }
        }

        // --- FUNCIÓN RENDER VINCULADA AL BÚNKER CENTRAL ---
        function render() {
            const out = document.getElementById('output'); 
            if(!out) return;
            out.innerHTML = '';

            // ACTUALIZACIÓN DE TÍTULO PARA EL NAVEGADOR (SEO)
            if (allLines.length > 0) {
                const primerNodo = allLines[0].split('|');
                if (primerNodo.length >= 2) {
                    document.title = primerNodo[1].trim() + " | NVVEX USA";
                }
            }
            allLines.slice(0, visibleCount).forEach(l => {
                const parts = l.split('|').map(s => s.trim());
                if(parts.length >= 4) {
                    const id = parts[0];
                    const tit = parts[1];
                    const fec = parts[2];
                    const res = parts[3];

                    // VINCULACIÓN MAESTRA AL BÚNKER CENTRAL
                    const linkAlBunker = `https://nvvexstudios.com/archivo.html?id=${id}`;
                    out.innerHTML += `
                        <div class="news-item" onclick="abrirReporte('${id}','${tit}','${fec}','${res}')">
                            <div style="font-size:0.6rem; opacity:0.6;">[SYSTEM_USA] ${fec} | ID:${id}</div>
                            <div style="font-weight:bold; color:#fff; margin:4px 0;">${tit}</div>
                            <div style="opacity:0.7; font-size:0.75rem;">${res.substring(0,90)}...</div>
                            <a href="${linkAlBunker}" target="_blank" class="btn-news" style="display:block; margin-bottom:5px; text-decoration:none; text-align:center;">VER REPORTE COMPLETO</a>
                            <button onclick="event.stopPropagation(); prompt('Link para Google/Redes:', window.location.origin + window.location.pathname + '?id=${id}')" 
                                    style="background:transparent; color:var(--neon); border:1px solid var(--neon); padding:5px; font-size:0.7rem; cursor:pointer; font-family:inherit; width:100%;">
                                [ GENERAR LINK DE INTELIGENCIA ]
                            </button>
                        </div>
                    `;
                }
            });
        }

        function abrirReporte(id, tit, fec, res) {
            // CAMBIO DE PESTAÑA AL ABRIR NOTICIA
            document.title = tit + " | NVVEX USA";

            window.history.pushState({}, '', `?id=${id}`);
            document.getElementById('modal-overlay').style.display = 'block';
            const m = document.getElementById('modal-inteligencia');
            m.style.display = 'block';
            m.innerHTML = `<div style="background:var(--neon); color:#000; padding:5px; text-align:center; font-weight:bold; font-size:0.8rem;">IDENTIFICADOR: ${id}</div>
                <p style="font-size:0.7rem; opacity:0.5; margin-top:15px;">CAPTURA: ${fec}</p>
                <h2 style="color:#fff; border-bottom:1px solid var(--neon); padding-bottom:10px; font-size:1.2rem;">${tit}</h2>
                <p style="color:#aaa; line-height:1.6; font-size:0.95rem;">${res}</p>
                <button onclick="cerrarReporte()" style="width:100%; background:var(--neon); border:none; padding:12px; cursor:pointer; font-weight:bold; margin-top:15px; font-family:inherit;">[ CERRAR ARCHIVO ]</button>`;
        }

        function cerrarReporte() {
            document.getElementById('modal-overlay').style.display = 'none';
            document.getElementById('modal-inteligencia').style.display = 'none';
        }

        function verMas() { visibleCount += 15; render(); }
        load();

        // --- NVVEX SECURITY & BYPASS PROTOCOL ---
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.onkeydown = e => { 
            if(e.keyCode == 123 || (e.ctrlKey && (e.keyCode == 85 || e.keyCode == 83 || (e.shiftKey && e.keyCode == 73)))) return false; 
        };
        // ----------------------------------------
    </script>
</body>
</html>
<script>
    // Bloqueo de Inspección y Clic Derecho
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.onkeydown = e => { 
        if(e.keyCode == 123 || (e.ctrlKey && (e.keyCode == 85 || e.keyCode == 83 || (e.shiftKey && e.keyCode == 73)))) return false; 
    };
    // Auto-limpieza de rastro en Consola
    setInterval(() => { console.clear(); }, 1000);
    // Protección de contenido (Anti-arrastre)
    document.addEventListener('dragstart', e => e.preventDefault());
    console.log("NVVEX SHIELD: FULLY OPERATIONAL");
</script>
